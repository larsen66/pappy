# Что мы сделали в приложении Login Auth

## Наши модели

### User (Пользователь)
Мы расширили стандартную модель пользователя Django:
- Авторизация по номеру телефона вместо username
- Дополнительные статусы пользователя:
  - `is_verified` - верифицирован
  - `is_seller` - продавец
  - `is_specialist` - специалист
  - `is_shelter` - приют
- Рейтинг пользователя
- Валидация номера телефона через RegexValidator

### OneTimeCode (Код подтверждения)
Модель для SMS-верификации:
- Генерация 4-значного кода
- Срок действия 5 минут
- Максимум 3 попытки ввода
- Отслеживание статуса верификации
- Защита от повторного использования

### SellerVerification (Верификация продавца)
Система проверки продавцов:
- Загрузка документов (паспорт, селфи)
- Статусы проверки (на рассмотрении/одобрено/отклонено)
- Автоматическое присвоение статуса после одобрения
- Причина отказа при отклонении

### VerificationRequest (Запрос на верификацию)
Общая модель для запросов верификации:
- Хранение документов в JSONField
- Отслеживание статуса запроса
- Комментарии модератора
- История изменений

## Что умеет наше приложение

### Аутентификация
Мы реализовали:
- Вход по номеру телефона
- SMS-верификацию
- Авторизацию через Госуслуги (заглушка)
- Защиту от перебора кодов

### Верификация пользователей
Добавили:
- Проверку документов продавцов
- Модерацию заявок
- Автоматическое обновление статусов
- Уведомления о результатах

### SMS-сервис
Реализовали:
- Интеграцию с SMS.ru
- Тестовый режим для разработки
- Логирование всех операций
- Обработку ошибок отправки

### Формы и валидация

#### PhoneLoginForm
- Валидация формата телефона
- Автоматическое форматирование
- Поддержка разных форматов ввода

#### ConfirmationCodeForm
- Проверка формата кода
- Ограничение попыток ввода
- Защита от брутфорса

## API Endpoints

### Аутентификация
- `POST /` - вход по телефону
- `POST /verify/` - проверка кода
- `POST /resend/` - повторная отправка кода
- `GET /gosuslugi/` - вход через Госуслуги
- `POST /logout/` - выход

## Административный интерфейс

### CustomUserAdmin
Мы настроили:
- Удобное управление пользователями
- Фильтры по статусам
- Поиск по телефону и имени
- Управление правами

## Безопасность
- Защита от перебора кодов
- Ограничение времени жизни кодов
- Валидация номеров телефона
- Проверка прав доступа

## Особенности реализации
- Асинхронная отправка SMS
- Кэширование кодов подтверждения
- Оптимизированные запросы
- Подробное логирование 