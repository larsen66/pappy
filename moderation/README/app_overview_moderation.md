# Обзор приложения Moderation

## Модели

### ModerationAction (Действие модерации)
Хранит информацию о действиях модерации:
- Типы действий:
  - approve (Одобрено)
  - reject (Отклонено)
  - block (Заблокировано)
  - warn (Предупреждение)
- Связь с модерируемым объектом через ContentType
- Модератор, выполнивший действие
- Причина действия
- Метка времени создания

### UserWarning (Предупреждение пользователя)
Система предупреждений пользователей:
- Связь с пользователем
- Модератор, выдавший предупреждение
- Причина предупреждения
- Метка времени создания
- Статус активности
- Автоматическая блокировка при накоплении предупреждений

### UserBan (Бан пользователя)
Система банов пользователей:
- Связь с пользователем
- Модератор, выдавший бан
- Причина бана
- Время начала и окончания
- Признак перманентного бана
- Проверка активности бана

### ModerationQueue (Очередь модерации)
Очередь объектов на модерацию:
- Статусы:
  - pending (На рассмотрении)
  - approved (Одобрено)
  - rejected (Отклонено)
- Связь с модерируемым объектом через ContentType
- Метки времени создания и обновления
- Модератор, обработавший элемент
- Комментарий модератора

## Сервисы

### ModerationService (Сервис модерации)

#### Основные функции:
1. Добавление в очередь модерации:
   - Создание элемента очереди для объекта
   - Использование ContentType для универсальности

2. Обработка элементов очереди:
   - Создание записи о действии
   - Обновление статуса
   - Транзакционная обработка

3. Система предупреждений:
   - Выдача предупреждений
   - Отслеживание количества активных предупреждений
   - Автоматический бан при превышении лимита (3 предупреждения)

4. Система банов:
   - Временные и перманентные баны
   - Установка длительности
   - Проверка статуса бана

5. Управление очередью:
   - Получение списка ожидающих модерации
   - Фильтрация по типу контента

### AutoModerationService (Сервис автомодерации)

#### Функциональность:
1. Автоматическая проверка объявлений:
   - Проверка на запрещенные слова
   - Выявление спам-признаков
   - Проверка изображений
   - Проверка цен

2. Система апелляций:
   - Обработка апелляций на решения модерации
   - Возврат объектов в очередь модерации
   - Сохранение истории апелляций

## Ключевые особенности

### Универсальность:
- Поддержка различных типов контента
- Единый интерфейс модерации
- Гибкая система действий

### Безопасность:
- Контроль доступа модераторов
- Логирование всех действий
- Защита от массовых нарушений

### Автоматизация:
- Автоматическая обработка нарушений
- Система предупреждений и банов
- Очередь модерации 