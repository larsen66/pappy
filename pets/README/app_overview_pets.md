# Обзор приложения Pets

## Модели

### SwipeAction (Действие свайпа)
Хранение действий свайпа (лайк/дизлайк):
- Типы действий:
  - like (Лайк)
  - dislike (Дизлайк)
- Связь с пользователем
- Связь с объявлением
- Метка времени создания
- Уникальность пары пользователь-объявление
- Автоматическое создание диалога при лайке
- Проверка взаимных лайков

### SwipeHistory (История свайпов)
История просмотров для возможности возврата:
- Связь с пользователем
- Связь с объявлением
- Время просмотра
- Признак возврата к карточке
- Уникальность просмотров

### Match (Совпадение)
Хранение взаимных лайков:
- Связь с пользователями (user1, user2)
- Связь с объявлениями (announcement1, announcement2)
- Время создания
- Статус активности
- Признак совпадения для вязки
- Оценка совместимости
- Расчет совместимости для вязки

## Сервисы

### SwipeSystem
Основной сервис для работы со свайпами:

1. Получение карточек:
   - Фильтрация по типу
   - Исключение просмотренных
   - Приоритизация премиум
   - Случайный порядок

2. Обработка свайпов:
   - Создание записи о свайпе
   - Проверка взаимности
   - Создание совпадений
   - Расчет совместимости

3. Управление совпадениями:
   - Получение списка совпадений
   - Фильтрация по типу
   - Сортировка по времени

## API

### SwipeViewSet
REST API для работы со свайпами:
- Получение следующих карточек
- Обработка свайпов
- Аутентификация
- Сериализация данных

## Представления

### Основные представления:
1. Свайп-интерфейс:
   - Показ карточек
   - Обработка действий
   - AJAX-обновление

2. Обработка свайпов:
   - Создание свайпов
   - Проверка валидности
   - Создание совпадений

3. Отмена свайпа:
   - Возврат к предыдущей карточке
   - Удаление действия
   - Обновление истории

4. Страница совпадений:
   - Список совпадений для вязки
   - Список лайков
   - Фильтрация и сортировка

## Сериализаторы

### AnimalAnnouncementSerializer
Сериализация данных животного:
- Основные характеристики
- Параметры для вязки
- Дополнительные поля

### AnnouncementSerializer
Сериализация объявлений:
- Основная информация
- Детали животного
- Метаданные

### MatchSerializer
Сериализация совпадений:
- Информация о пользователях
- Детали объявлений
- Статус совпадения

## URL-маршруты
- API для свайпов
- Страница свайпов
- Обработка свайпов
- Страница совпадений

## Ключевые особенности

### Умный подбор:
- Приоритет премиум объявлений
- Учет популярности
- Случайный порядок для разнообразия

### Система совпадений:
- Автоматическое создание пар
- Расчет совместимости
- Создание диалогов

### Оптимизация:
- Эффективные запросы
- Индексы базы данных
- AJAX-обновления 